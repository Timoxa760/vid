# vid — ASCII Video Converter

Инструмент для конвертации видео в **ASCII‑арт** с поддержкой работы из терминала (CLI) и через графический интерфейс (GUI). Репозиторий содержит две основные версии: консольную (`vid2.py`) и оконную (`vid3_0.1.6.py`).[page:2][page:3]

---

## Возможности

- Конвертация видео в ASCII‑анимацию с настройкой ширины, стиля и цветов.[page:2][page:3]
- Сохранение результатов в:
  - текстовые кадры (`frame_XXXXXX.txt`);
  - PNG‑изображения в оригинальном разрешении;
  - MP4‑видео, собранное из ASCII‑кадров с разным качеством (CRF / без потерь).[page:2][page:3]
- Центрирование текста, выбор цвета фона, поддержка прозрачных областей по порогу яркости.[page:2][page:3]
- Режим зацикленного воспроизведения ASCII‑видео в терминале и живой предпросмотр в GUI.[page:2][page:3]
- Дополнительные “камерные” настройки (яркость, контраст, гамма) в GUI‑версии.[page:3]

---

## Архитектура и файлы

| Файл            | Назначение                                                                 |
|-----------------|----------------------------------------------------------------------------|
| `vid2.py`       | CLI‑версия: работа в терминале, меню настроек, вывод ASCII‑видео в консоль и сохранение артефактов.[page:2] |
| `vid3_0.1.6.py` | GUI‑версия на CustomTkinter/Tkinter + pygame, предпросмотр и конвертация с ползунками и кнопками.[page:3] |

---

## Установка

### Требования

- Python 3.10+ (рекомендуется).
- FFmpeg, установленный в систему и доступный из `PATH` (для сборки `.mp4`).[page:2][page:3]
- Для GUI‑версии (`vid3_0.1.6.py`) требуются пакеты Python:[page:3]
  - `customtkinter`
  - `opencv-python`
  - `pygame`
  - `Pillow`
  - `numpy`

### Установка зависимостей

pip install customtkinter opencv-python pygame pillow numpy

text

Проверь, что FFmpeg установлен и доступен из командной строки:

ffmpeg -version

text

Если команда не находится, установи FFmpeg через пакетный менеджер (Linux/macOS) или скачай бинарники с сайта ffmpeg.org и добавь в `PATH` (Windows).[web:1]

### Клонирование репозитория

git clone https://github.com/Timoxa760/vid.git
cd vid

text

---

## Использование (CLI, `vid2.py`)

Запуск:

python vid2.py

text

После запуска в терминале откроется интерактивное меню.[page:2]

### Основной сценарий

1. Введи путь к видеофайлу  
   Примеры:
   - `C:/videos/input.mp4`
   - `/home/user/videos/input.mp4`.[page:2]
2. Открой меню настроек и выбери:
   - **Ширину** ASCII‑кадра в символах (можно привязать к ширине терминала).[page:2]
   - **Стиль вывода**:
     - обычный / инвертированный;
     - с прозрачным фоном или без;
     - порог прозрачности по яркости пикселя.[page:2]
   - **Цвет текста**:
     - фиксированный;
     - случайный по кадрам или символам;
     - без окраски (монохром).[page:2]
   - **Цвет фона** для PNG/видео.
   - **Качество шрифта** (`high` / `medium` / `low`) для отрисовки PNG и видео.[page:2]
   - Что сохранять:
     - TXT;
     - PNG;
     - MP4.[page:2]
3. Запусти конвертацию и дождись окончания.[page:2]

### Структура выходных файлов (CLI)

Результаты сохраняются в папку:

~/Downloads/ASCII_Videos/<имя_видео>_<набор_настроек>/

text

Внутри создаются подпапки:[page:2]

- `frames/` — текстовые и/или PNG‑кадры;
- `video/` — итоговые видеофайлы `.mp4`, если включено сохранение видео.[page:2]

---

## Использование (GUI, `vid3_0.1.6.py`)

Запуск:

python vid3_0.1.6.py

text

Откроется окно на CustomTkinter.[page:3]

### Основные элементы интерфейса

- Кнопка **выбора файла** — выбор видео для конвертации.[page:3]
- Поля/слайдеры для:
  - ширины ASCII‑кадра в символах;
  - коэффициента высота/ширина (определяет число строк).[page:3]
- Блок “камеры”:
  - яркость;
  - контраст;
  - гамма.[page:3]
- Чекбоксы стиля:
  - инверсия;
  - прозрачный фон по порогу яркости;
  - случайные цвета текста.[page:3]
- Выбор цвета текста и фона через colorpicker.[page:3]
- Выбор качества итогового MP4:
  - низкое / среднее / высокое / без потерь (меняются параметры FFmpeg).[page:3]
- Чекбоксы сохранения:
  - TXT;
  - PNG;
  - MP4.[page:3]
- Кнопка **“Запустить конвертацию”**:
  - старт обработки в отдельном потоке;
  - отображение прогресса и статуса.[page:3]

### Структура выходных файлов (GUI)

Базовая папка:

~/Downloads/ASCII_Videos/<YYYY-MM-DD_HH-MM-SS>/

text

Внутри:[page:3]

- `frames/` — итоговые текстовые и/или PNG‑кадры;
- `temp/` — временные PNG для сборки видео (удаляется после завершения);[page:3]
- `ascii_video.mp4` — готовое видео в корне папки проекта.[page:3]

---

## Как это работает

- Кадры читаются через `cv2.VideoCapture` (OpenCV). Видео разбивается на отдельные кадры.[page:2][page:3]
- Каждый кадр переводится в градации серого, к нему по желанию применяются:
  - настройка яркости/контраста/гаммы (в GUI);
  - инвертирование изображения.[page:2][page:3]
- Кадр ресайзится в сетку `width × height_chars`, затем значения яркости мапятся на список ASCII‑символов (например, `@%#*+=-:.`).[page:2][page:3]
- Для PNG/видео создаётся поверхность `pygame` размером исходного кадра. ASCII‑строки отрисовываются на ней выбранным шрифтом, с центрированием относительно оригинального кадра.[page:2][page:3]
- FFmpeg собирает видео по маске `frame_%06d.png` с заданным FPS и параметрами качества (CRF/битрейт/без потерь).[page:2][page:3]

---

## Примеры

### Минимальный пример CLI

python vid2.py

указать путь к видео
выбрать ширину 120 символов
включить сохранение PNG + MP4
запустить конвертацию
text

После завершения обработки открой получившееся видео из папки `~/Downloads/ASCII_Videos/.../video/`.[page:2]

### Минимальный пример GUI

1. Запусти `python vid3_0.1.6.py`.
2. Выбери видеофайл через кнопку.
3. Задай, например:
   - ширина: 120;
   - высота/ширина: 0.5;
   - средняя яркость/контраст/гамма (по умолчанию).[page:3]
4. Отметь сохранение PNG + MP4.
5. Нажми «Запуск конвертации» и дождись завершения.[page:3]

---

## Планы развития

- Более гибкий выбор шрифтов (указание своего TTF/OTF в настройках).
- Пакетная обработка нескольких видео за один запуск.
- Режим live‑потока с веб‑камеры (реальное время → ASCII).

---

## Вклад

1. Создай issue с описанием бага или предложения.
2. Сделай fork репозитория.
3. Создай ветку (`feature/...`, `fix/...`).
4. Убедись, что изменения не ломают текущий функционал.
5. Открой pull request.

---

## Лицензия

Укажи здесь выбранную лицензию (например, MIT, Apache‑2.0 или GPL‑3.0) и добавь файл `LICENSE` в корень репозитория.
